# Training Configuration
# This file defines training parameters and hyperparameters

# Basic Training Parameters
training:
  # Number of training epochs
  epochs: 100

  # Batch size for mini-batch training
  batch_size: 32

  # Learning rate and scheduling
  learning_rate: 0.001
  lr_scheduler:
    type: "none"  # Options: none, step, exponential, cosine, reduce_on_plateau
    step_size: 30
    gamma: 0.1
    patience: 10
    factor: 0.5

  # Early stopping
  early_stopping:
    enabled: true
    monitor: "val_loss"  # Metric to monitor
    mode: "min"  # 'min' for loss, 'max' for accuracy
    patience: 10  # Number of epochs to wait before stopping
    min_delta: 0.001  # Minimum change to qualify as improvement
    restore_best_weights: true

  # Gradient clipping
  gradient_clipping:
    enabled: true
    max_norm: 1.0  # Maximum gradient norm

  # Regularization
  regularization:
    l1: 0.0  # L1 regularization strength
    l2: 0.01  # L2 regularization strength
    dropout: 0.2  # Dropout rate (if not specified in model config)

# Training Callbacks
callbacks:
  # Model checkpointing
  model_checkpoint:
    enabled: true
    filepath: "models/checkpoints/model_{epoch:02d}_{val_loss:.2f}.h5"
    monitor: "val_loss"
    mode: "min"
    save_best_only: true
    save_weights_only: false
    period: 1

  # Learning rate scheduling
  reduce_lr_on_plateau:
    enabled: true
    monitor: "val_loss"
    factor: 0.5
    patience: 5
    min_lr: 1e-6
    mode: "min"

  # TensorBoard logging
  tensorboard:
    enabled: true
    log_dir: "logs/tensorboard"
    histogram_freq: 1
    write_graph: true
    write_images: true
    update_freq: "epoch"

  # CSV logging
  csv_logger:
    enabled: true
    filename: "logs/training_log.csv"
    separator: ","
    append: false

  # Custom callbacks
  custom_callbacks: []

# Cross-Validation
cross_validation:
  enabled: false
  cv_folds: 5
  shuffle: true
  random_state: 42
  stratified: true  # For classification tasks

# Training Optimization
optimization:
  # Mixed precision training
  mixed_precision: false
  precision: "float32"  # Options: float16, float32, float64

  # Distributed training
  distributed:
    enabled: false
    backend: "nccl"  # Options: nccl, gloo, mpi
    world_size: 1
    rank: 0

  # Gradient accumulation
  gradient_accumulation:
    enabled: false
    steps: 4

  # Memory optimization
  memory_efficient: false
  gradient_checkpointing: false

# Validation Configuration
validation:
  # Validation frequency
  validation_freq: 1  # Validate every N epochs

  # Validation metrics
  metrics:
    - "accuracy"
    - "precision"
    - "recall"
    - "f1_score"
    - "loss"

  # Custom metrics
  custom_metrics: []

# Logging Configuration
logging:
  level: "INFO"  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file_logging: true
  log_file: "logs/training.log"
  max_file_size: "10MB"
  backup_count: 5

# Hardware Configuration
hardware:
  # GPU configuration
  gpu:
    enabled: true
    device: 0  # GPU device ID
    memory_limit: null  # Memory limit in MB
    allow_growth: true  # Allow GPU memory to grow

  # CPU configuration
  cpu:
    num_threads: null  # Number of CPU threads to use
    inter_op_parallelism: 1
    intra_op_parallelism: null

  # TPU configuration (for TensorFlow)
  tpu:
    enabled: false
    tpu_name: null
    zone: null

# Monitoring and Profiling
monitoring:
  # Performance monitoring
  profile_training: false
  profile_batch_time: false

  # Resource monitoring
  monitor_resources: true
  log_system_metrics: true

  # Experiment tracking
  experiment_tracking:
    enabled: false
    tool: "mlflow"  # Options: mlflow, wandb, comet_ml
    project_name: "generic_ai_model"
    experiment_name: "default_experiment"

# Training Data Augmentation
data_augmentation:
  enabled: false
  type: "image"  # Options: image, text, tabular, none

  # Image augmentation
  image_augmentation:
    rotation_range: 20
    width_shift_range: 0.1
    height_shift_range: 0.1
    horizontal_flip: true
    vertical_flip: false
    zoom_range: 0.1
    fill_mode: "nearest"

  # Text augmentation
  text_augmentation:
    synonym_replacement: 0.1
    random_deletion: 0.1
    random_swap: 0.1

# Training Resume Configuration
resume_training:
  enabled: false
  checkpoint_path: "models/checkpoints/latest_checkpoint.h5"
  resume_optimizer: true
  resume_lr_scheduler: true

# Error Handling
error_handling:
  max_retries: 3
  retry_delay: 60  # seconds
  save_on_error: true
  error_checkpoint_dir: "models/error_checkpoints"
